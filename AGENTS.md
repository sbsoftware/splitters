# Repository Guidelines

## Project Structure & Module Organization
- `src/` contains the Crystal app:
  - `src/crumble_server.cr` boots `Crumble::Server` and requires app modules.
  - `src/models/` holds Orma/SQLite models (e.g., `User`, `Group`, `Expense`).
  - `src/resources/` defines HTTP resources/controllers.
  - `src/views/`, `src/styles/`, `src/js/` contain UI, styling DSL, and service worker code.
- `spec/` contains Crystal specs (built-in `spec` framework).
- `lib/` and `bin/` are typically generated by `shards` (treat as vendor output; avoid editing directly).

## Build, Test, and Development Commands
- Install dependencies: `shards install`
- Run locally (one-off): `crystal run --error-trace src/splitters.cr -- -p 3007`
- Run with auto-reload (requires `watchexec`): `./watch.sh`
- Build a binary: `shards build` (or `shards build --release`)
- Run tests: `crystal spec`

## Coding Style & Naming Conventions
- Follow `.editorconfig`: 2-space indentation, LF, final newline, no trailing whitespace.
- Format before opening a PR: `crystal tool format src spec` (use `crystal tool format --check src spec` to verify).
- Crystal conventions: `CamelCase` for types/modules; `snake_case` for files, methods, and variables.

## Testing Guidelines
- Place specs in `spec/` and name files `*_spec.cr`; keep examples small and deterministic.
- Prefer unit-level coverage for model logic and resource behavior; avoid relying on pre-existing `data.db` state.

## Configuration & Local Artifacts
- The SQLite database lives at `./data.db` (ignored). For a clean slate, stop the server and delete `data.db`.
- Use `shard.override.yml` for local path overrides (e.g., developing `crumble-turbo` alongside this repo); keep it uncommitted.
